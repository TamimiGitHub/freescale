   1              		.cpu cortex-m0
   2              		.fpu softvfp
   3              		.eabi_attribute 20, 1
   4              		.eabi_attribute 21, 1
   5              		.eabi_attribute 23, 3
   6              		.eabi_attribute 24, 1
   7              		.eabi_attribute 25, 1
   8              		.eabi_attribute 26, 1
   9              		.eabi_attribute 30, 6
  10              		.eabi_attribute 34, 0
  11              		.eabi_attribute 18, 4
  12              		.code	16
  13              		.file	"TFC_Motor.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.rodata.PWMtable,"a",%progbits
  18              		.align	2
  21              	PWMtable:
  22 0000 00000000 		.word	0
  23 0004 0AD7233C 		.word	1008981770
  24 0008 0AD7A33C 		.word	1017370378
  25 000c 8FC2F53C 		.word	1022739087
  26 0010 0AD7233D 		.word	1025758986
  27 0014 CDCC4C3D 		.word	1028443341
  28 0018 8FC2753D 		.word	1031127695
  29 001c 295C8F3D 		.word	1032805417
  30 0020 0AD7A33D 		.word	1034147594
  31 0024 EC51B83D 		.word	1035489772
  32 0028 CDCCCC3D 		.word	1036831949
  33 002c AE47E13D 		.word	1038174126
  34 0030 8FC2F53D 		.word	1039516303
  35 0034 B81E053E 		.word	1040522936
  36 0038 295C0F3E 		.word	1041194025
  37 003c 9A99193E 		.word	1041865114
  38 0040 0AD7233E 		.word	1042536202
  39 0044 7B142E3E 		.word	1043207291
  40 0048 EC51383E 		.word	1043878380
  41 004c 5C8F423E 		.word	1044549468
  42 0050 CDCC4C3E 		.word	1045220557
  43 0054 3D0A573E 		.word	1045891645
  44 0058 AE47613E 		.word	1046562734
  45 005c 1F856B3E 		.word	1047233823
  46 0060 8FC2753E 		.word	1047904911
  47 0064 0000803E 		.word	1048576000
  48 0068 B81E853E 		.word	1048911544
  49 006c 713D8A3E 		.word	1049247089
  50 0070 295C8F3E 		.word	1049582633
  51 0074 E17A943E 		.word	1049918177
  52 0078 9A99993E 		.word	1050253722
  53 007c 52B89E3E 		.word	1050589266
  54 0080 0AD7A33E 		.word	1050924810
  55 0084 C3F5A83E 		.word	1051260355
  56 0088 7B14AE3E 		.word	1051595899
  57 008c 3333B33E 		.word	1051931443
  58 0090 EC51B83E 		.word	1052266988
  59 0094 A470BD3E 		.word	1052602532
  60 0098 5C8FC23E 		.word	1052938076
  61 009c 14AEC73E 		.word	1053273620
  62 00a0 CDCCCC3E 		.word	1053609165
  63 00a4 85EBD13E 		.word	1053944709
  64 00a8 3D0AD73E 		.word	1054280253
  65 00ac F628DC3E 		.word	1054615798
  66 00b0 AE47E13E 		.word	1054951342
  67 00b4 6666E63E 		.word	1055286886
  68 00b8 1F85EB3E 		.word	1055622431
  69 00bc D7A3F03E 		.word	1055957975
  70 00c0 8FC2F53E 		.word	1056293519
  71 00c4 48E1FA3E 		.word	1056629064
  72 00c8 0000003F 		.word	1056964608
  73 00cc 5C8F023F 		.word	1057132380
  74 00d0 B81E053F 		.word	1057300152
  75 00d4 14AE073F 		.word	1057467924
  76 00d8 713D0A3F 		.word	1057635697
  77 00dc CDCC0C3F 		.word	1057803469
  78 00e0 295C0F3F 		.word	1057971241
  79 00e4 85EB113F 		.word	1058139013
  80 00e8 E17A143F 		.word	1058306785
  81 00ec 3D0A173F 		.word	1058474557
  82 00f0 9A99193F 		.word	1058642330
  83 00f4 F6281C3F 		.word	1058810102
  84 00f8 52B81E3F 		.word	1058977874
  85 00fc AE47213F 		.word	1059145646
  86 0100 0AD7233F 		.word	1059313418
  87 0104 6666263F 		.word	1059481190
  88 0108 C3F5283F 		.word	1059648963
  89 010c 1F852B3F 		.word	1059816735
  90 0110 7B142E3F 		.word	1059984507
  91 0114 D7A3303F 		.word	1060152279
  92 0118 3333333F 		.word	1060320051
  93 011c 8FC2353F 		.word	1060487823
  94 0120 EC51383F 		.word	1060655596
  95 0124 48E13A3F 		.word	1060823368
  96 0128 A4703D3F 		.word	1060991140
  97 012c 0000403F 		.word	1061158912
  98 0130 5C8F423F 		.word	1061326684
  99 0134 B81E453F 		.word	1061494456
 100 0138 14AE473F 		.word	1061662228
 101 013c 713D4A3F 		.word	1061830001
 102 0140 CDCC4C3F 		.word	1061997773
 103 0144 295C4F3F 		.word	1062165545
 104 0148 85EB513F 		.word	1062333317
 105 014c E17A543F 		.word	1062501089
 106 0150 3D0A573F 		.word	1062668861
 107 0154 9A99593F 		.word	1062836634
 108 0158 F6285C3F 		.word	1063004406
 109 015c 52B85E3F 		.word	1063172178
 110 0160 AE47613F 		.word	1063339950
 111 0164 0AD7633F 		.word	1063507722
 112 0168 6666663F 		.word	1063675494
 113 016c C3F5683F 		.word	1063843267
 114 0170 1F856B3F 		.word	1064011039
 115 0174 7B146E3F 		.word	1064178811
 116 0178 D7A3703F 		.word	1064346583
 117 017c 3333733F 		.word	1064514355
 118 0180 8FC2753F 		.word	1064682127
 119 0184 EC51783F 		.word	1064849900
 120 0188 48E17A3F 		.word	1065017672
 121 018c A4707D3F 		.word	1065185444
 122 0190 0000803F 		.word	1065353216
 123              		.global	__aeabi_ui2f
 124              		.global	__aeabi_fmul
 125              		.global	__aeabi_f2uiz
 126              		.section	.text.TFC_SetPWMLookup,"ax",%progbits
 127              		.align	2
 128              		.global	TFC_SetPWMLookup
 129              		.code	16
 130              		.thumb_func
 132              	TFC_SetPWMLookup:
 133              	.LFB0:
 134              		.file 1 "../sources/TFC/TFC_Motor.c"
   1:../sources/TFC/TFC_Motor.c **** #include "TFC\TFC.h"
   2:../sources/TFC/TFC_Motor.c **** #include "derivative.h"
   3:../sources/TFC/TFC_Motor.c **** 
   4:../sources/TFC/TFC_Motor.c **** 
   5:../sources/TFC/TFC_Motor.c **** #define FTM0_MOD_VALUE	(int)((float)(PERIPHERAL_BUS_CLOCK)/TFC_MOTOR_SWITCHING_FREQUENCY)
   6:../sources/TFC/TFC_Motor.c **** 
   7:../sources/TFC/TFC_Motor.c **** #define FTM0_CLOCK                                   	      (CORE_CLOCK/2)
   8:../sources/TFC/TFC_Motor.c **** #define FTM0_CLK_PRESCALE                                 	   0  // Prescale Selector value - see c
   9:../sources/TFC/TFC_Motor.c **** #define FTM0_OVERFLOW_FREQUENCY 5000							  //
  10:../sources/TFC/TFC_Motor.c **** #define	M(i)	(float)((i + 50.0)/100.0)
  11:../sources/TFC/TFC_Motor.c **** 
  12:../sources/TFC/TFC_Motor.c **** /**********************************************************************************************/
  13:../sources/TFC/TFC_Motor.c **** 
  14:../sources/TFC/TFC_Motor.c **** static const float PWMtable[101]=
  15:../sources/TFC/TFC_Motor.c **** {
  16:../sources/TFC/TFC_Motor.c **** 	/* Assume User input is correct
  17:../sources/TFC/TFC_Motor.c **** 	if(MotorA>100.0)
  18:../sources/TFC/TFC_Motor.c **** 		MotorA = 100.0;
  19:../sources/TFC/TFC_Motor.c **** 	else if(MotorA<-100.0)
  20:../sources/TFC/TFC_Motor.c **** 		MotorA = -100.0;
  21:../sources/TFC/TFC_Motor.c **** 	
  22:../sources/TFC/TFC_Motor.c **** 	if(MotorB>100.0)
  23:../sources/TFC/TFC_Motor.c **** 			MotorB = 100.0;
  24:../sources/TFC/TFC_Motor.c **** 		else if(MotorB<-100.0)
  25:../sources/TFC/TFC_Motor.c **** 			MotorB = -100.0;
  26:../sources/TFC/TFC_Motor.c **** 	*/
  27:../sources/TFC/TFC_Motor.c **** 			M(-50),
  28:../sources/TFC/TFC_Motor.c **** 			M(-49),
  29:../sources/TFC/TFC_Motor.c **** 			M(-48),
  30:../sources/TFC/TFC_Motor.c **** 			M(-47),
  31:../sources/TFC/TFC_Motor.c **** 			M(-46),
  32:../sources/TFC/TFC_Motor.c **** 			M(-45),
  33:../sources/TFC/TFC_Motor.c **** 			M(-44),
  34:../sources/TFC/TFC_Motor.c **** 			M(-43),
  35:../sources/TFC/TFC_Motor.c **** 			M(-42),
  36:../sources/TFC/TFC_Motor.c **** 			M(-41),
  37:../sources/TFC/TFC_Motor.c **** 			M(-40),
  38:../sources/TFC/TFC_Motor.c **** 			M(-39),
  39:../sources/TFC/TFC_Motor.c **** 			M(-38),
  40:../sources/TFC/TFC_Motor.c **** 			M(-37),
  41:../sources/TFC/TFC_Motor.c **** 			M(-36),
  42:../sources/TFC/TFC_Motor.c **** 			M(-35),
  43:../sources/TFC/TFC_Motor.c **** 			M(-34),
  44:../sources/TFC/TFC_Motor.c **** 			M(-33),
  45:../sources/TFC/TFC_Motor.c **** 			M(-32),
  46:../sources/TFC/TFC_Motor.c **** 			M(-31),
  47:../sources/TFC/TFC_Motor.c **** 			M(-30),
  48:../sources/TFC/TFC_Motor.c **** 			M(-29),
  49:../sources/TFC/TFC_Motor.c **** 			M(-28),
  50:../sources/TFC/TFC_Motor.c **** 			M(-27),
  51:../sources/TFC/TFC_Motor.c **** 			M(-26),
  52:../sources/TFC/TFC_Motor.c **** 			M(-25),
  53:../sources/TFC/TFC_Motor.c **** 			M(-24),
  54:../sources/TFC/TFC_Motor.c **** 			M(-23),
  55:../sources/TFC/TFC_Motor.c **** 			M(-22),
  56:../sources/TFC/TFC_Motor.c **** 			M(-21),
  57:../sources/TFC/TFC_Motor.c **** 			M(-20),
  58:../sources/TFC/TFC_Motor.c **** 			M(-19),
  59:../sources/TFC/TFC_Motor.c **** 			M(-18),
  60:../sources/TFC/TFC_Motor.c **** 			M(-17),
  61:../sources/TFC/TFC_Motor.c **** 			M(-16),
  62:../sources/TFC/TFC_Motor.c **** 			M(-15),
  63:../sources/TFC/TFC_Motor.c **** 			M(-14),
  64:../sources/TFC/TFC_Motor.c **** 			M(-13),
  65:../sources/TFC/TFC_Motor.c **** 			M(-12),
  66:../sources/TFC/TFC_Motor.c **** 			M(-11),
  67:../sources/TFC/TFC_Motor.c **** 			M(-10),
  68:../sources/TFC/TFC_Motor.c **** 			M(-9),
  69:../sources/TFC/TFC_Motor.c **** 			M(-8),
  70:../sources/TFC/TFC_Motor.c **** 			M(-7),
  71:../sources/TFC/TFC_Motor.c **** 			M(-6),
  72:../sources/TFC/TFC_Motor.c **** 			M(-5),
  73:../sources/TFC/TFC_Motor.c **** 			M(-4),
  74:../sources/TFC/TFC_Motor.c **** 			M(-3),
  75:../sources/TFC/TFC_Motor.c **** 			M(-2),
  76:../sources/TFC/TFC_Motor.c **** 			M(-1),
  77:../sources/TFC/TFC_Motor.c **** 			M(0),
  78:../sources/TFC/TFC_Motor.c **** 			M(1),
  79:../sources/TFC/TFC_Motor.c **** 			M(2),
  80:../sources/TFC/TFC_Motor.c **** 			M(3),
  81:../sources/TFC/TFC_Motor.c **** 			M(4),
  82:../sources/TFC/TFC_Motor.c **** 			M(5),
  83:../sources/TFC/TFC_Motor.c **** 			M(6),
  84:../sources/TFC/TFC_Motor.c **** 			M(7),
  85:../sources/TFC/TFC_Motor.c **** 			M(8),
  86:../sources/TFC/TFC_Motor.c **** 			M(9),
  87:../sources/TFC/TFC_Motor.c **** 			M(10),
  88:../sources/TFC/TFC_Motor.c **** 			M(11),
  89:../sources/TFC/TFC_Motor.c **** 			M(12),
  90:../sources/TFC/TFC_Motor.c **** 			M(13),
  91:../sources/TFC/TFC_Motor.c **** 			M(14),
  92:../sources/TFC/TFC_Motor.c **** 			M(15),
  93:../sources/TFC/TFC_Motor.c **** 			M(16),
  94:../sources/TFC/TFC_Motor.c **** 			M(17),
  95:../sources/TFC/TFC_Motor.c **** 			M(18),
  96:../sources/TFC/TFC_Motor.c **** 			M(19),
  97:../sources/TFC/TFC_Motor.c **** 			M(20),
  98:../sources/TFC/TFC_Motor.c **** 			M(21),
  99:../sources/TFC/TFC_Motor.c **** 			M(22),
 100:../sources/TFC/TFC_Motor.c **** 			M(23),
 101:../sources/TFC/TFC_Motor.c **** 			M(24),
 102:../sources/TFC/TFC_Motor.c **** 			M(25),
 103:../sources/TFC/TFC_Motor.c **** 			M(26),
 104:../sources/TFC/TFC_Motor.c **** 			M(27),
 105:../sources/TFC/TFC_Motor.c **** 			M(28),
 106:../sources/TFC/TFC_Motor.c **** 			M(29),
 107:../sources/TFC/TFC_Motor.c **** 			M(30),
 108:../sources/TFC/TFC_Motor.c **** 			M(31),
 109:../sources/TFC/TFC_Motor.c **** 			M(32),
 110:../sources/TFC/TFC_Motor.c **** 			M(33),
 111:../sources/TFC/TFC_Motor.c **** 			M(34),
 112:../sources/TFC/TFC_Motor.c **** 			M(35),
 113:../sources/TFC/TFC_Motor.c **** 			M(36),
 114:../sources/TFC/TFC_Motor.c **** 			M(37),
 115:../sources/TFC/TFC_Motor.c **** 			M(38),
 116:../sources/TFC/TFC_Motor.c **** 			M(39),
 117:../sources/TFC/TFC_Motor.c **** 			M(40),
 118:../sources/TFC/TFC_Motor.c **** 			M(41),
 119:../sources/TFC/TFC_Motor.c **** 			M(42),
 120:../sources/TFC/TFC_Motor.c **** 			M(43),
 121:../sources/TFC/TFC_Motor.c **** 			M(44),
 122:../sources/TFC/TFC_Motor.c **** 			M(45),
 123:../sources/TFC/TFC_Motor.c **** 			M(46),
 124:../sources/TFC/TFC_Motor.c **** 			M(47),
 125:../sources/TFC/TFC_Motor.c **** 			M(48),
 126:../sources/TFC/TFC_Motor.c **** 			M(49),
 127:../sources/TFC/TFC_Motor.c **** 			M(50)
 128:../sources/TFC/TFC_Motor.c **** };
 129:../sources/TFC/TFC_Motor.c **** 
 130:../sources/TFC/TFC_Motor.c **** void TFC_SetPWMLookup(int setA, int setB)
 131:../sources/TFC/TFC_Motor.c **** {
 135              		.loc 1 131 0
 136              		.cfi_startproc
 137 0000 90B5     		push	{r4, r7, lr}
 138              	.LCFI0:
 139              		.cfi_def_cfa_offset 12
 140              		.cfi_offset 4, -12
 141              		.cfi_offset 7, -8
 142              		.cfi_offset 14, -4
 143 0002 83B0     		sub	sp, sp, #12
 144              	.LCFI1:
 145              		.cfi_def_cfa_offset 24
 146 0004 00AF     		add	r7, sp, #0
 147              	.LCFI2:
 148              		.cfi_def_cfa_register 7
 149 0006 7860     		str	r0, [r7, #4]
 150 0008 3960     		str	r1, [r7]
 132:../sources/TFC/TFC_Motor.c **** 	setA += 50;
 151              		.loc 1 132 0
 152 000a 7B68     		ldr	r3, [r7, #4]
 153 000c 3233     		add	r3, r3, #50
 154 000e 7B60     		str	r3, [r7, #4]
 133:../sources/TFC/TFC_Motor.c **** 	setB += 50;
 155              		.loc 1 133 0
 156 0010 3B68     		ldr	r3, [r7]
 157 0012 3233     		add	r3, r3, #50
 158 0014 3B60     		str	r3, [r7]
 134:../sources/TFC/TFC_Motor.c **** 	TPM0_C2V = (uint16_t) ((float)TPM0_MOD *PWMtable[setA]);
 159              		.loc 1 134 0
 160 0016 1B4C     		ldr	r4, .L2
 161 0018 1A4B     		ldr	r3, .L2
 162 001a 9B68     		ldr	r3, [r3, #8]
 163 001c 181C     		mov	r0, r3
 164 001e FFF7FEFF 		bl	__aeabi_ui2f
 165 0022 021C     		add	r2, r0, #0
 166 0024 184B     		ldr	r3, .L2+4
 167 0026 7968     		ldr	r1, [r7, #4]
 168 0028 8900     		lsl	r1, r1, #2
 169 002a CB58     		ldr	r3, [r1, r3]
 170 002c 101C     		add	r0, r2, #0
 171 002e 191C     		add	r1, r3, #0
 172 0030 FFF7FEFF 		bl	__aeabi_fmul
 173 0034 031C     		add	r3, r0, #0
 174 0036 181C     		add	r0, r3, #0
 175 0038 FFF7FEFF 		bl	__aeabi_f2uiz
 176 003c 031C     		mov	r3, r0
 177 003e 9BB2     		uxth	r3, r3
 178 0040 2362     		str	r3, [r4, #32]
 135:../sources/TFC/TFC_Motor.c **** 	TPM0_C3V = TPM0_C2V;
 179              		.loc 1 135 0
 180 0042 104B     		ldr	r3, .L2
 181 0044 0F4A     		ldr	r2, .L2
 182 0046 126A     		ldr	r2, [r2, #32]
 183 0048 9A62     		str	r2, [r3, #40]
 136:../sources/TFC/TFC_Motor.c **** 	TPM0_C0V = (uint16_t) ((float)TPM0_MOD *PWMtable[setB]);
 184              		.loc 1 136 0
 185 004a 0E4C     		ldr	r4, .L2
 186 004c 0D4B     		ldr	r3, .L2
 187 004e 9B68     		ldr	r3, [r3, #8]
 188 0050 181C     		mov	r0, r3
 189 0052 FFF7FEFF 		bl	__aeabi_ui2f
 190 0056 021C     		add	r2, r0, #0
 191 0058 0B4B     		ldr	r3, .L2+4
 192 005a 3968     		ldr	r1, [r7]
 193 005c 8900     		lsl	r1, r1, #2
 194 005e CB58     		ldr	r3, [r1, r3]
 195 0060 101C     		add	r0, r2, #0
 196 0062 191C     		add	r1, r3, #0
 197 0064 FFF7FEFF 		bl	__aeabi_fmul
 198 0068 031C     		add	r3, r0, #0
 199 006a 181C     		add	r0, r3, #0
 200 006c FFF7FEFF 		bl	__aeabi_f2uiz
 201 0070 031C     		mov	r3, r0
 202 0072 9BB2     		uxth	r3, r3
 203 0074 2361     		str	r3, [r4, #16]
 137:../sources/TFC/TFC_Motor.c **** 	TPM0_C1V = TPM0_C0V;
 204              		.loc 1 137 0
 205 0076 034B     		ldr	r3, .L2
 206 0078 024A     		ldr	r2, .L2
 207 007a 1269     		ldr	r2, [r2, #16]
 208 007c 9A61     		str	r2, [r3, #24]
 138:../sources/TFC/TFC_Motor.c **** }
 209              		.loc 1 138 0
 210 007e BD46     		mov	sp, r7
 211 0080 03B0     		add	sp, sp, #12
 212              		@ sp needed for prologue
 213 0082 90BD     		pop	{r4, r7, pc}
 214              	.L3:
 215              		.align	2
 216              	.L2:
 217 0084 00800340 		.word	1073971200
 218 0088 00000000 		.word	PWMtable
 219              		.cfi_endproc
 220              	.LFE0:
 222              		.section	.text.TFC_InitMotorPWM,"ax",%progbits
 223              		.align	2
 224              		.global	TFC_InitMotorPWM
 225              		.code	16
 226              		.thumb_func
 228              	TFC_InitMotorPWM:
 229              	.LFB1:
 139:../sources/TFC/TFC_Motor.c **** 
 140:../sources/TFC/TFC_Motor.c **** 
 141:../sources/TFC/TFC_Motor.c **** void TFC_InitMotorPWM()
 142:../sources/TFC/TFC_Motor.c **** {
 230              		.loc 1 142 0
 231              		.cfi_startproc
 232 0000 80B5     		push	{r7, lr}
 233              	.LCFI3:
 234              		.cfi_def_cfa_offset 8
 235              		.cfi_offset 7, -8
 236              		.cfi_offset 14, -4
 237 0002 00AF     		add	r7, sp, #0
 238              	.LCFI4:
 239              		.cfi_def_cfa_register 7
 143:../sources/TFC/TFC_Motor.c **** 	//Clock Setup for the TPM requires a couple steps.
 144:../sources/TFC/TFC_Motor.c **** 
 145:../sources/TFC/TFC_Motor.c **** 	
 146:../sources/TFC/TFC_Motor.c ****     //1st,  set the clock mux
 147:../sources/TFC/TFC_Motor.c ****     //See Page 124 of f the KL25 Sub-Family Reference Manual, Rev. 3, September 2012
 148:../sources/TFC/TFC_Motor.c ****     SIM_SOPT2 |= SIM_SOPT2_PLLFLLSEL_MASK;// We Want MCGPLLCLK/2 (See Page 196 of the KL25 Sub-Fami
 240              		.loc 1 148 0
 241 0004 2D4A     		ldr	r2, .L5
 242 0006 2D49     		ldr	r1, .L5
 243 0008 2D4B     		ldr	r3, .L5+4
 244 000a CB58     		ldr	r3, [r1, r3]
 245 000c 8021     		mov	r1, #128
 246 000e 4902     		lsl	r1, r1, #9
 247 0010 1943     		orr	r1, r3
 248 0012 2B4B     		ldr	r3, .L5+4
 249 0014 D150     		str	r1, [r2, r3]
 149:../sources/TFC/TFC_Motor.c ****     SIM_SOPT2 &= ~(SIM_SOPT2_TPMSRC_MASK);
 250              		.loc 1 149 0
 251 0016 294A     		ldr	r2, .L5
 252 0018 2849     		ldr	r1, .L5
 253 001a 294B     		ldr	r3, .L5+4
 254 001c C958     		ldr	r1, [r1, r3]
 255 001e 294B     		ldr	r3, .L5+8
 256 0020 1940     		and	r1, r3
 257 0022 274B     		ldr	r3, .L5+4
 258 0024 D150     		str	r1, [r2, r3]
 150:../sources/TFC/TFC_Motor.c ****     SIM_SOPT2 |= SIM_SOPT2_TPMSRC(1); //We want the MCGPLLCLK/2 (See Page 196 of the KL25 Sub-Famil
 259              		.loc 1 150 0
 260 0026 254A     		ldr	r2, .L5
 261 0028 2449     		ldr	r1, .L5
 262 002a 254B     		ldr	r3, .L5+4
 263 002c CB58     		ldr	r3, [r1, r3]
 264 002e 8021     		mov	r1, #128
 265 0030 4904     		lsl	r1, r1, #17
 266 0032 1943     		orr	r1, r3
 267 0034 224B     		ldr	r3, .L5+4
 268 0036 D150     		str	r1, [r2, r3]
 151:../sources/TFC/TFC_Motor.c **** 
 152:../sources/TFC/TFC_Motor.c **** 
 153:../sources/TFC/TFC_Motor.c **** 	//Enable the Clock to the FTM0 Module
 154:../sources/TFC/TFC_Motor.c **** 	//See Page 207 of f the KL25 Sub-Family Reference Manual, Rev. 3, September 2012
 155:../sources/TFC/TFC_Motor.c **** 	SIM_SCGC6 |= SIM_SCGC6_TPM0_MASK;
 269              		.loc 1 155 0
 270 0038 204A     		ldr	r2, .L5
 271 003a 2049     		ldr	r1, .L5
 272 003c 224B     		ldr	r3, .L5+12
 273 003e CB58     		ldr	r3, [r1, r3]
 274 0040 8021     		mov	r1, #128
 275 0042 4904     		lsl	r1, r1, #17
 276 0044 1943     		orr	r1, r3
 277 0046 204B     		ldr	r3, .L5+12
 278 0048 D150     		str	r1, [r2, r3]
 156:../sources/TFC/TFC_Motor.c ****     
 157:../sources/TFC/TFC_Motor.c ****     //The TPM Module has Clock.  Now set up the peripheral
 158:../sources/TFC/TFC_Motor.c ****     
 159:../sources/TFC/TFC_Motor.c ****     //Blow away the control registers to ensure that the counter is not running
 160:../sources/TFC/TFC_Motor.c ****     TPM0_SC = 0;
 279              		.loc 1 160 0
 280 004a 204B     		ldr	r3, .L5+16
 281 004c 0022     		mov	r2, #0
 282 004e 1A60     		str	r2, [r3]
 161:../sources/TFC/TFC_Motor.c ****     TPM0_CONF = 0;
 283              		.loc 1 161 0
 284 0050 1E4A     		ldr	r2, .L5+16
 285 0052 8423     		mov	r3, #132
 286 0054 0021     		mov	r1, #0
 287 0056 D150     		str	r1, [r2, r3]
 162:../sources/TFC/TFC_Motor.c ****     
 163:../sources/TFC/TFC_Motor.c ****     //While the counter is disabled we can setup the prescaler
 164:../sources/TFC/TFC_Motor.c ****     
 165:../sources/TFC/TFC_Motor.c ****     TPM0_SC = TPM_SC_PS(FTM0_CLK_PRESCALE);
 288              		.loc 1 165 0
 289 0058 1C4B     		ldr	r3, .L5+16
 290 005a 0022     		mov	r2, #0
 291 005c 1A60     		str	r2, [r3]
 166:../sources/TFC/TFC_Motor.c ****     
 167:../sources/TFC/TFC_Motor.c ****     //Setup the mod register to get the correct PWM Period
 168:../sources/TFC/TFC_Motor.c ****     
 169:../sources/TFC/TFC_Motor.c ****     TPM0_MOD = FTM0_CLOCK/(1<<FTM0_CLK_PRESCALE)/FTM0_OVERFLOW_FREQUENCY;
 292              		.loc 1 169 0
 293 005e 1B4B     		ldr	r3, .L5+16
 294 0060 9622     		mov	r2, #150
 295 0062 5201     		lsl	r2, r2, #5
 296 0064 9A60     		str	r2, [r3, #8]
 170:../sources/TFC/TFC_Motor.c ****     
 171:../sources/TFC/TFC_Motor.c ****     //Setup Channels 0,1,2,3
 172:../sources/TFC/TFC_Motor.c ****     TPM0_C0SC = TPM_CnSC_MSB_MASK | TPM_CnSC_ELSB_MASK;
 297              		.loc 1 172 0
 298 0066 194B     		ldr	r3, .L5+16
 299 0068 2822     		mov	r2, #40
 300 006a DA60     		str	r2, [r3, #12]
 173:../sources/TFC/TFC_Motor.c ****     TPM0_C1SC = TPM_CnSC_MSB_MASK | TPM_CnSC_ELSA_MASK; // invert the second PWM signal for a compl
 301              		.loc 1 173 0
 302 006c 174B     		ldr	r3, .L5+16
 303 006e 2422     		mov	r2, #36
 304 0070 5A61     		str	r2, [r3, #20]
 174:../sources/TFC/TFC_Motor.c ****     TPM0_C2SC = TPM_CnSC_MSB_MASK | TPM_CnSC_ELSB_MASK;
 305              		.loc 1 174 0
 306 0072 164B     		ldr	r3, .L5+16
 307 0074 2822     		mov	r2, #40
 308 0076 DA61     		str	r2, [r3, #28]
 175:../sources/TFC/TFC_Motor.c ****     TPM0_C3SC = TPM_CnSC_MSB_MASK | TPM_CnSC_ELSA_MASK; // invert the second PWM signal for a compl
 309              		.loc 1 175 0
 310 0078 144B     		ldr	r3, .L5+16
 311 007a 2422     		mov	r2, #36
 312 007c 5A62     		str	r2, [r3, #36]
 176:../sources/TFC/TFC_Motor.c ****     
 177:../sources/TFC/TFC_Motor.c ****     
 178:../sources/TFC/TFC_Motor.c ****     //Enable the Counter
 179:../sources/TFC/TFC_Motor.c ****     
 180:../sources/TFC/TFC_Motor.c ****     //Set the Default duty cycle to 50% duty cycle
 181:../sources/TFC/TFC_Motor.c ****     TFC_SetMotorPWM(0.0,0.0);
 313              		.loc 1 181 0
 314 007e 0022     		mov	r2, #0
 315 0080 0023     		mov	r3, #0
 316 0082 101C     		add	r0, r2, #0
 317 0084 191C     		add	r1, r3, #0
 318 0086 FFF7FEFF 		bl	TFC_SetMotorPWM
 182:../sources/TFC/TFC_Motor.c ****     
 183:../sources/TFC/TFC_Motor.c ****     //Enable the TPM COunter
 184:../sources/TFC/TFC_Motor.c ****     TPM0_SC |= TPM_SC_CMOD(1);
 319              		.loc 1 184 0
 320 008a 104B     		ldr	r3, .L5+16
 321 008c 0F4A     		ldr	r2, .L5+16
 322 008e 1268     		ldr	r2, [r2]
 323 0090 0821     		mov	r1, #8
 324 0092 0A43     		orr	r2, r1
 325 0094 1A60     		str	r2, [r3]
 185:../sources/TFC/TFC_Motor.c ****     
 186:../sources/TFC/TFC_Motor.c ****     
 187:../sources/TFC/TFC_Motor.c ****     //Enable the FTM functions on the the port
 188:../sources/TFC/TFC_Motor.c ****     PORTC_PCR1 = PORT_PCR_MUX(4);
 326              		.loc 1 188 0
 327 0096 0E4B     		ldr	r3, .L5+20
 328 0098 8022     		mov	r2, #128
 329 009a D200     		lsl	r2, r2, #3
 330 009c 5A60     		str	r2, [r3, #4]
 189:../sources/TFC/TFC_Motor.c ****     PORTC_PCR2 = PORT_PCR_MUX(4);     
 331              		.loc 1 189 0
 332 009e 0C4B     		ldr	r3, .L5+20
 333 00a0 8022     		mov	r2, #128
 334 00a2 D200     		lsl	r2, r2, #3
 335 00a4 9A60     		str	r2, [r3, #8]
 190:../sources/TFC/TFC_Motor.c ****     PORTC_PCR3 = PORT_PCR_MUX(4);  
 336              		.loc 1 190 0
 337 00a6 0A4B     		ldr	r3, .L5+20
 338 00a8 8022     		mov	r2, #128
 339 00aa D200     		lsl	r2, r2, #3
 340 00ac DA60     		str	r2, [r3, #12]
 191:../sources/TFC/TFC_Motor.c ****     PORTC_PCR4 = PORT_PCR_MUX(4);  
 341              		.loc 1 191 0
 342 00ae 084B     		ldr	r3, .L5+20
 343 00b0 8022     		mov	r2, #128
 344 00b2 D200     		lsl	r2, r2, #3
 345 00b4 1A61     		str	r2, [r3, #16]
 192:../sources/TFC/TFC_Motor.c **** 
 193:../sources/TFC/TFC_Motor.c **** }
 346              		.loc 1 193 0
 347 00b6 BD46     		mov	sp, r7
 348              		@ sp needed for prologue
 349 00b8 80BD     		pop	{r7, pc}
 350              	.L6:
 351 00ba C046     		.align	2
 352              	.L5:
 353 00bc 00700440 		.word	1074032640
 354 00c0 04100000 		.word	4100
 355 00c4 FFFFFFFC 		.word	-50331649
 356 00c8 3C100000 		.word	4156
 357 00cc 00800340 		.word	1073971200
 358 00d0 00B00440 		.word	1074049024
 359              		.cfi_endproc
 360              	.LFE1:
 362              		.global	__aeabi_fcmpgt
 363              		.global	__aeabi_fcmplt
 364              		.global	__aeabi_f2d
 365              		.global	__aeabi_dadd
 366              		.global	__aeabi_ddiv
 367              		.global	__aeabi_dmul
 368              		.global	__aeabi_d2uiz
 369              		.section	.text.TFC_SetMotorPWM,"ax",%progbits
 370              		.align	2
 371              		.global	TFC_SetMotorPWM
 372              		.code	16
 373              		.thumb_func
 375              	TFC_SetMotorPWM:
 376              	.LFB2:
 194:../sources/TFC/TFC_Motor.c **** 
 195:../sources/TFC/TFC_Motor.c **** 
 196:../sources/TFC/TFC_Motor.c **** 
 197:../sources/TFC/TFC_Motor.c **** void TFC_SetMotorPWM(float MotorA , float MotorB)
 198:../sources/TFC/TFC_Motor.c **** {
 377              		.loc 1 198 0
 378              		.cfi_startproc
 379 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 380              	.LCFI5:
 381              		.cfi_def_cfa_offset 20
 382              		.cfi_offset 4, -20
 383              		.cfi_offset 5, -16
 384              		.cfi_offset 6, -12
 385              		.cfi_offset 7, -8
 386              		.cfi_offset 14, -4
 387 0002 4746     		mov	r7, r8
 388 0004 80B4     		push	{r7}
 389              	.LCFI6:
 390              		.cfi_def_cfa_offset 24
 391              		.cfi_offset 8, -24
 392 0006 82B0     		sub	sp, sp, #8
 393              	.LCFI7:
 394              		.cfi_def_cfa_offset 32
 395 0008 00AF     		add	r7, sp, #0
 396              	.LCFI8:
 397              		.cfi_def_cfa_register 7
 398 000a 7860     		str	r0, [r7, #4]
 399 000c 3960     		str	r1, [r7]
 199:../sources/TFC/TFC_Motor.c **** 	
 200:../sources/TFC/TFC_Motor.c **** 	if(MotorA>1.0)
 400              		.loc 1 200 0
 401 000e 7868     		ldr	r0, [r7, #4]
 402 0010 FE21     		mov	r1, #254
 403 0012 8905     		lsl	r1, r1, #22
 404 0014 FFF7FEFF 		bl	__aeabi_fcmpgt
 405 0018 031C     		mov	r3, r0
 406 001a 002B     		cmp	r3, #0
 407 001c 03D0     		beq	.L20
 408              	.L16:
 201:../sources/TFC/TFC_Motor.c **** 		MotorA = 1.0;
 409              		.loc 1 201 0
 410 001e FE23     		mov	r3, #254
 411 0020 9B05     		lsl	r3, r3, #22
 412 0022 7B60     		str	r3, [r7, #4]
 413 0024 08E0     		b	.L10
 414              	.L20:
 202:../sources/TFC/TFC_Motor.c **** 	else if(MotorA<-1.0)
 415              		.loc 1 202 0
 416 0026 7868     		ldr	r0, [r7, #4]
 417 0028 4B49     		ldr	r1, .L22+16
 418 002a FFF7FEFF 		bl	__aeabi_fcmplt
 419 002e 031C     		mov	r3, r0
 420 0030 002B     		cmp	r3, #0
 421 0032 01D0     		beq	.L10
 422              	.L17:
 203:../sources/TFC/TFC_Motor.c **** 		MotorA = -1.0;
 423              		.loc 1 203 0
 424 0034 484B     		ldr	r3, .L22+16
 425 0036 7B60     		str	r3, [r7, #4]
 426              	.L10:
 204:../sources/TFC/TFC_Motor.c **** 	
 205:../sources/TFC/TFC_Motor.c **** 	if(MotorB>1.0)
 427              		.loc 1 205 0
 428 0038 3868     		ldr	r0, [r7]
 429 003a FE21     		mov	r1, #254
 430 003c 8905     		lsl	r1, r1, #22
 431 003e FFF7FEFF 		bl	__aeabi_fcmpgt
 432 0042 031C     		mov	r3, r0
 433 0044 002B     		cmp	r3, #0
 434 0046 03D0     		beq	.L21
 435              	.L18:
 206:../sources/TFC/TFC_Motor.c **** 			MotorB = 1.0;
 436              		.loc 1 206 0
 437 0048 FE23     		mov	r3, #254
 438 004a 9B05     		lsl	r3, r3, #22
 439 004c 3B60     		str	r3, [r7]
 440 004e 08E0     		b	.L14
 441              	.L21:
 207:../sources/TFC/TFC_Motor.c **** 		else if(MotorB<-1.0)
 442              		.loc 1 207 0
 443 0050 3868     		ldr	r0, [r7]
 444 0052 4149     		ldr	r1, .L22+16
 445 0054 FFF7FEFF 		bl	__aeabi_fcmplt
 446 0058 031C     		mov	r3, r0
 447 005a 002B     		cmp	r3, #0
 448 005c 01D0     		beq	.L14
 449              	.L19:
 208:../sources/TFC/TFC_Motor.c **** 			MotorB = -1.0;
 450              		.loc 1 208 0
 451 005e 3E4B     		ldr	r3, .L22+16
 452 0060 3B60     		str	r3, [r7]
 453              	.L14:
 209:../sources/TFC/TFC_Motor.c **** 		
 210:../sources/TFC/TFC_Motor.c **** 	TPM0_C2V = (uint16_t) ((float)TPM0_MOD * ((MotorA + 1.0)/2.0));
 454              		.loc 1 210 0
 455 0062 3E4A     		ldr	r2, .L22+20
 456 0064 9046     		mov	r8, r2
 457 0066 3D4B     		ldr	r3, .L22+20
 458 0068 9B68     		ldr	r3, [r3, #8]
 459 006a 181C     		mov	r0, r3
 460 006c FFF7FEFF 		bl	__aeabi_ui2f
 461 0070 031C     		add	r3, r0, #0
 462 0072 181C     		add	r0, r3, #0
 463 0074 FFF7FEFF 		bl	__aeabi_f2d
 464 0078 051C     		mov	r5, r0
 465 007a 0E1C     		mov	r6, r1
 466 007c 7868     		ldr	r0, [r7, #4]
 467 007e FFF7FEFF 		bl	__aeabi_f2d
 468 0082 031C     		mov	r3, r0
 469 0084 0C1C     		mov	r4, r1
 470 0086 181C     		mov	r0, r3
 471 0088 211C     		mov	r1, r4
 472 008a 304B     		ldr	r3, .L22+4
 473 008c 2E4A     		ldr	r2, .L22
 474 008e FFF7FEFF 		bl	__aeabi_dadd
 475 0092 031C     		mov	r3, r0
 476 0094 0C1C     		mov	r4, r1
 477 0096 181C     		mov	r0, r3
 478 0098 211C     		mov	r1, r4
 479 009a 2D4A     		ldr	r2, .L22+8
 480 009c 2D4B     		ldr	r3, .L22+12
 481 009e FFF7FEFF 		bl	__aeabi_ddiv
 482 00a2 031C     		mov	r3, r0
 483 00a4 0C1C     		mov	r4, r1
 484 00a6 281C     		mov	r0, r5
 485 00a8 311C     		mov	r1, r6
 486 00aa 1A1C     		mov	r2, r3
 487 00ac 231C     		mov	r3, r4
 488 00ae FFF7FEFF 		bl	__aeabi_dmul
 489 00b2 031C     		mov	r3, r0
 490 00b4 0C1C     		mov	r4, r1
 491 00b6 181C     		mov	r0, r3
 492 00b8 211C     		mov	r1, r4
 493 00ba FFF7FEFF 		bl	__aeabi_d2uiz
 494 00be 031C     		mov	r3, r0
 495 00c0 9BB2     		uxth	r3, r3
 496 00c2 4246     		mov	r2, r8
 497 00c4 1362     		str	r3, [r2, #32]
 211:../sources/TFC/TFC_Motor.c **** 	TPM0_C3V = TPM0_C2V;
 498              		.loc 1 211 0
 499 00c6 254B     		ldr	r3, .L22+20
 500 00c8 244A     		ldr	r2, .L22+20
 501 00ca 126A     		ldr	r2, [r2, #32]
 502 00cc 9A62     		str	r2, [r3, #40]
 212:../sources/TFC/TFC_Motor.c **** 	TPM0_C0V = (uint16_t) ((float)TPM0_MOD * ((MotorB + 1.0)/2.0));
 503              		.loc 1 212 0
 504 00ce 234B     		ldr	r3, .L22+20
 505 00d0 9846     		mov	r8, r3
 506 00d2 224B     		ldr	r3, .L22+20
 507 00d4 9B68     		ldr	r3, [r3, #8]
 508 00d6 181C     		mov	r0, r3
 509 00d8 FFF7FEFF 		bl	__aeabi_ui2f
 510 00dc 031C     		add	r3, r0, #0
 511 00de 181C     		add	r0, r3, #0
 512 00e0 FFF7FEFF 		bl	__aeabi_f2d
 513 00e4 051C     		mov	r5, r0
 514 00e6 0E1C     		mov	r6, r1
 515 00e8 3868     		ldr	r0, [r7]
 516 00ea FFF7FEFF 		bl	__aeabi_f2d
 517 00ee 031C     		mov	r3, r0
 518 00f0 0C1C     		mov	r4, r1
 519 00f2 181C     		mov	r0, r3
 520 00f4 211C     		mov	r1, r4
 521 00f6 154B     		ldr	r3, .L22+4
 522 00f8 134A     		ldr	r2, .L22
 523 00fa FFF7FEFF 		bl	__aeabi_dadd
 524 00fe 031C     		mov	r3, r0
 525 0100 0C1C     		mov	r4, r1
 526 0102 181C     		mov	r0, r3
 527 0104 211C     		mov	r1, r4
 528 0106 124A     		ldr	r2, .L22+8
 529 0108 124B     		ldr	r3, .L22+12
 530 010a FFF7FEFF 		bl	__aeabi_ddiv
 531 010e 031C     		mov	r3, r0
 532 0110 0C1C     		mov	r4, r1
 533 0112 281C     		mov	r0, r5
 534 0114 311C     		mov	r1, r6
 535 0116 1A1C     		mov	r2, r3
 536 0118 231C     		mov	r3, r4
 537 011a FFF7FEFF 		bl	__aeabi_dmul
 538 011e 031C     		mov	r3, r0
 539 0120 0C1C     		mov	r4, r1
 540 0122 181C     		mov	r0, r3
 541 0124 211C     		mov	r1, r4
 542 0126 FFF7FEFF 		bl	__aeabi_d2uiz
 543 012a 031C     		mov	r3, r0
 544 012c 9BB2     		uxth	r3, r3
 545 012e 4246     		mov	r2, r8
 546 0130 1361     		str	r3, [r2, #16]
 213:../sources/TFC/TFC_Motor.c **** 	TPM0_C1V = TPM0_C0V;
 547              		.loc 1 213 0
 548 0132 0A4B     		ldr	r3, .L22+20
 549 0134 094A     		ldr	r2, .L22+20
 550 0136 1269     		ldr	r2, [r2, #16]
 551 0138 9A61     		str	r2, [r3, #24]
 214:../sources/TFC/TFC_Motor.c **** 
 215:../sources/TFC/TFC_Motor.c **** }
 552              		.loc 1 215 0
 553 013a BD46     		mov	sp, r7
 554 013c 02B0     		add	sp, sp, #8
 555              		@ sp needed for prologue
 556 013e 04BC     		pop	{r2}
 557 0140 9046     		mov	r8, r2
 558 0142 F0BD     		pop	{r4, r5, r6, r7, pc}
 559              	.L23:
 560 0144 C046C046 		.align	3
 561              	.L22:
 562 0148 00000000 		.word	0
 563 014c 0000F03F 		.word	1072693248
 564 0150 00000000 		.word	0
 565 0154 00000040 		.word	1073741824
 566 0158 000080BF 		.word	-1082130432
 567 015c 00800340 		.word	1073971200
 568              		.cfi_endproc
 569              	.LFE2:
 571              		.text
 572              	.Letext0:
 573              		.file 2 "C:/Freescale/CW MCU v10.5/MCU/ARM_GCC_Support/ewl/EWL_C/include/cstdint"
 574              		.file 3 "H:/CWorkspace/freescale-line/Project_Headers/MKL25Z4.h"
DEFINED SYMBOLS
                            *ABS*:00000000 TFC_Motor.c
C:\Users\ERIKJO~1\AppData\Local\Temp\ccWgnDHj.s:18     .rodata.PWMtable:00000000 $d
C:\Users\ERIKJO~1\AppData\Local\Temp\ccWgnDHj.s:21     .rodata.PWMtable:00000000 PWMtable
C:\Users\ERIKJO~1\AppData\Local\Temp\ccWgnDHj.s:127    .text.TFC_SetPWMLookup:00000000 $t
C:\Users\ERIKJO~1\AppData\Local\Temp\ccWgnDHj.s:132    .text.TFC_SetPWMLookup:00000000 TFC_SetPWMLookup
C:\Users\ERIKJO~1\AppData\Local\Temp\ccWgnDHj.s:217    .text.TFC_SetPWMLookup:00000084 $d
C:\Users\ERIKJO~1\AppData\Local\Temp\ccWgnDHj.s:223    .text.TFC_InitMotorPWM:00000000 $t
C:\Users\ERIKJO~1\AppData\Local\Temp\ccWgnDHj.s:228    .text.TFC_InitMotorPWM:00000000 TFC_InitMotorPWM
C:\Users\ERIKJO~1\AppData\Local\Temp\ccWgnDHj.s:375    .text.TFC_SetMotorPWM:00000000 TFC_SetMotorPWM
C:\Users\ERIKJO~1\AppData\Local\Temp\ccWgnDHj.s:353    .text.TFC_InitMotorPWM:000000bc $d
C:\Users\ERIKJO~1\AppData\Local\Temp\ccWgnDHj.s:370    .text.TFC_SetMotorPWM:00000000 $t
C:\Users\ERIKJO~1\AppData\Local\Temp\ccWgnDHj.s:562    .text.TFC_SetMotorPWM:00000148 $d
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
__aeabi_ui2f
__aeabi_fmul
__aeabi_f2uiz
__aeabi_fcmpgt
__aeabi_fcmplt
__aeabi_f2d
__aeabi_dadd
__aeabi_ddiv
__aeabi_dmul
__aeabi_d2uiz
