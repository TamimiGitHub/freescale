   1              		.cpu cortex-m0
   2              		.fpu softvfp
   3              		.eabi_attribute 20, 1
   4              		.eabi_attribute 21, 1
   5              		.eabi_attribute 23, 3
   6              		.eabi_attribute 24, 1
   7              		.eabi_attribute 25, 1
   8              		.eabi_attribute 26, 1
   9              		.eabi_attribute 30, 6
  10              		.eabi_attribute 34, 0
  11              		.eabi_attribute 18, 4
  12              		.code	16
  13              		.file	"TFC_Motor.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.rodata.PWMtable,"a",%progbits
  18              		.align	2
  21              	PWMtable:
  22 0000 00000000 		.word	0
  23 0004 0AD7233C 		.word	1008981770
  24 0008 0AD7A33C 		.word	1017370378
  25 000c 8FC2F53C 		.word	1022739087
  26 0010 0AD7233D 		.word	1025758986
  27 0014 CDCC4C3D 		.word	1028443341
  28 0018 8FC2753D 		.word	1031127695
  29 001c 295C8F3D 		.word	1032805417
  30 0020 0AD7A33D 		.word	1034147594
  31 0024 EC51B83D 		.word	1035489772
  32 0028 CDCCCC3D 		.word	1036831949
  33 002c AE47E13D 		.word	1038174126
  34 0030 8FC2F53D 		.word	1039516303
  35 0034 B81E053E 		.word	1040522936
  36 0038 295C0F3E 		.word	1041194025
  37 003c 9A99193E 		.word	1041865114
  38 0040 0AD7233E 		.word	1042536202
  39 0044 7B142E3E 		.word	1043207291
  40 0048 EC51383E 		.word	1043878380
  41 004c 5C8F423E 		.word	1044549468
  42 0050 CDCC4C3E 		.word	1045220557
  43 0054 3D0A573E 		.word	1045891645
  44 0058 AE47613E 		.word	1046562734
  45 005c 1F856B3E 		.word	1047233823
  46 0060 8FC2753E 		.word	1047904911
  47 0064 0000803E 		.word	1048576000
  48 0068 B81E853E 		.word	1048911544
  49 006c 713D8A3E 		.word	1049247089
  50 0070 295C8F3E 		.word	1049582633
  51 0074 E17A943E 		.word	1049918177
  52 0078 9A99993E 		.word	1050253722
  53 007c 52B89E3E 		.word	1050589266
  54 0080 0AD7A33E 		.word	1050924810
  55 0084 C3F5A83E 		.word	1051260355
  56 0088 7B14AE3E 		.word	1051595899
  57 008c 3333B33E 		.word	1051931443
  58 0090 EC51B83E 		.word	1052266988
  59 0094 A470BD3E 		.word	1052602532
  60 0098 5C8FC23E 		.word	1052938076
  61 009c 14AEC73E 		.word	1053273620
  62 00a0 CDCCCC3E 		.word	1053609165
  63 00a4 85EBD13E 		.word	1053944709
  64 00a8 3D0AD73E 		.word	1054280253
  65 00ac F628DC3E 		.word	1054615798
  66 00b0 AE47E13E 		.word	1054951342
  67 00b4 6666E63E 		.word	1055286886
  68 00b8 1F85EB3E 		.word	1055622431
  69 00bc D7A3F03E 		.word	1055957975
  70 00c0 8FC2F53E 		.word	1056293519
  71 00c4 48E1FA3E 		.word	1056629064
  72 00c8 0000003F 		.word	1056964608
  73 00cc 5C8F023F 		.word	1057132380
  74 00d0 B81E053F 		.word	1057300152
  75 00d4 14AE073F 		.word	1057467924
  76 00d8 713D0A3F 		.word	1057635697
  77 00dc CDCC0C3F 		.word	1057803469
  78 00e0 295C0F3F 		.word	1057971241
  79 00e4 85EB113F 		.word	1058139013
  80 00e8 E17A143F 		.word	1058306785
  81 00ec 3D0A173F 		.word	1058474557
  82 00f0 9A99193F 		.word	1058642330
  83 00f4 F6281C3F 		.word	1058810102
  84 00f8 52B81E3F 		.word	1058977874
  85 00fc AE47213F 		.word	1059145646
  86 0100 0AD7233F 		.word	1059313418
  87 0104 6666263F 		.word	1059481190
  88 0108 C3F5283F 		.word	1059648963
  89 010c 1F852B3F 		.word	1059816735
  90 0110 7B142E3F 		.word	1059984507
  91 0114 D7A3303F 		.word	1060152279
  92 0118 3333333F 		.word	1060320051
  93 011c 8FC2353F 		.word	1060487823
  94 0120 EC51383F 		.word	1060655596
  95 0124 48E13A3F 		.word	1060823368
  96 0128 A4703D3F 		.word	1060991140
  97 012c 0000403F 		.word	1061158912
  98 0130 5C8F423F 		.word	1061326684
  99 0134 B81E453F 		.word	1061494456
 100 0138 14AE473F 		.word	1061662228
 101 013c 713D4A3F 		.word	1061830001
 102 0140 CDCC4C3F 		.word	1061997773
 103 0144 295C4F3F 		.word	1062165545
 104 0148 85EB513F 		.word	1062333317
 105 014c E17A543F 		.word	1062501089
 106 0150 3D0A573F 		.word	1062668861
 107 0154 9A99593F 		.word	1062836634
 108 0158 F6285C3F 		.word	1063004406
 109 015c 52B85E3F 		.word	1063172178
 110 0160 AE47613F 		.word	1063339950
 111 0164 0AD7633F 		.word	1063507722
 112 0168 6666663F 		.word	1063675494
 113 016c C3F5683F 		.word	1063843267
 114 0170 1F856B3F 		.word	1064011039
 115 0174 7B146E3F 		.word	1064178811
 116 0178 D7A3703F 		.word	1064346583
 117 017c 3333733F 		.word	1064514355
 118 0180 8FC2753F 		.word	1064682127
 119 0184 EC51783F 		.word	1064849900
 120 0188 48E17A3F 		.word	1065017672
 121 018c A4707D3F 		.word	1065185444
 122 0190 0000803F 		.word	1065353216
 123              		.global	__aeabi_i2d
 124              		.global	__aeabi_dcmpgt
 125              		.global	__aeabi_dcmplt
 126              		.global	__aeabi_ui2f
 127              		.global	__aeabi_fmul
 128              		.global	__aeabi_f2uiz
 129              		.section	.text.TFC_SetPWMLookup,"ax",%progbits
 130              		.align	2
 131              		.global	TFC_SetPWMLookup
 132              		.code	16
 133              		.thumb_func
 135              	TFC_SetPWMLookup:
 136              	.LFB0:
 137              		.file 1 "../sources/TFC/TFC_Motor.c"
   1:../sources/TFC/TFC_Motor.c **** #include "TFC\TFC.h"
   2:../sources/TFC/TFC_Motor.c **** #include "derivative.h"
   3:../sources/TFC/TFC_Motor.c **** 
   4:../sources/TFC/TFC_Motor.c **** 
   5:../sources/TFC/TFC_Motor.c **** #define FTM0_MOD_VALUE	(int)((float)(PERIPHERAL_BUS_CLOCK)/TFC_MOTOR_SWITCHING_FREQUENCY)
   6:../sources/TFC/TFC_Motor.c **** 
   7:../sources/TFC/TFC_Motor.c **** #define FTM0_CLOCK                                   	      (CORE_CLOCK/2)
   8:../sources/TFC/TFC_Motor.c **** #define FTM0_CLK_PRESCALE                                 	   0  // Prescale Selector value - see c
   9:../sources/TFC/TFC_Motor.c **** #define FTM0_OVERFLOW_FREQUENCY 5000							  //
  10:../sources/TFC/TFC_Motor.c **** #define	M(i) 	(i + 50.0)/100.0
  11:../sources/TFC/TFC_Motor.c **** 
  12:../sources/TFC/TFC_Motor.c **** /**********************************************************************************************/
  13:../sources/TFC/TFC_Motor.c **** 
  14:../sources/TFC/TFC_Motor.c **** static const float PWMtable[101]=
  15:../sources/TFC/TFC_Motor.c **** {
  16:../sources/TFC/TFC_Motor.c **** 	/* Assume User input is correct
  17:../sources/TFC/TFC_Motor.c **** 	if(MotorA>100.0)
  18:../sources/TFC/TFC_Motor.c **** 		MotorA = 100.0;
  19:../sources/TFC/TFC_Motor.c **** 	else if(MotorA<-100.0)
  20:../sources/TFC/TFC_Motor.c **** 		MotorA = -100.0;
  21:../sources/TFC/TFC_Motor.c **** 	
  22:../sources/TFC/TFC_Motor.c **** 	if(MotorB>100.0)
  23:../sources/TFC/TFC_Motor.c **** 			MotorB = 100.0;
  24:../sources/TFC/TFC_Motor.c **** 		else if(MotorB<-100.0)
  25:../sources/TFC/TFC_Motor.c **** 			MotorB = -100.0;
  26:../sources/TFC/TFC_Motor.c **** 	*/
  27:../sources/TFC/TFC_Motor.c **** 			M(-50),
  28:../sources/TFC/TFC_Motor.c **** 			M(-49),
  29:../sources/TFC/TFC_Motor.c **** 			M(-48),
  30:../sources/TFC/TFC_Motor.c **** 			M(-47),
  31:../sources/TFC/TFC_Motor.c **** 			M(-46),
  32:../sources/TFC/TFC_Motor.c **** 			M(-45),
  33:../sources/TFC/TFC_Motor.c **** 			M(-44),
  34:../sources/TFC/TFC_Motor.c **** 			M(-43),
  35:../sources/TFC/TFC_Motor.c **** 			M(-42),
  36:../sources/TFC/TFC_Motor.c **** 			M(-41),
  37:../sources/TFC/TFC_Motor.c **** 			M(-40),
  38:../sources/TFC/TFC_Motor.c **** 			M(-39),
  39:../sources/TFC/TFC_Motor.c **** 			M(-38),
  40:../sources/TFC/TFC_Motor.c **** 			M(-37),
  41:../sources/TFC/TFC_Motor.c **** 			M(-36),
  42:../sources/TFC/TFC_Motor.c **** 			M(-35),
  43:../sources/TFC/TFC_Motor.c **** 			M(-34),
  44:../sources/TFC/TFC_Motor.c **** 			M(-33),
  45:../sources/TFC/TFC_Motor.c **** 			M(-32),
  46:../sources/TFC/TFC_Motor.c **** 			M(-31),
  47:../sources/TFC/TFC_Motor.c **** 			M(-30),
  48:../sources/TFC/TFC_Motor.c **** 			M(-29),
  49:../sources/TFC/TFC_Motor.c **** 			M(-28),
  50:../sources/TFC/TFC_Motor.c **** 			M(-27),
  51:../sources/TFC/TFC_Motor.c **** 			M(-26),
  52:../sources/TFC/TFC_Motor.c **** 			M(-25),
  53:../sources/TFC/TFC_Motor.c **** 			M(-24),
  54:../sources/TFC/TFC_Motor.c **** 			M(-23),
  55:../sources/TFC/TFC_Motor.c **** 			M(-22),
  56:../sources/TFC/TFC_Motor.c **** 			M(-21),
  57:../sources/TFC/TFC_Motor.c **** 			M(-20),
  58:../sources/TFC/TFC_Motor.c **** 			M(-19),
  59:../sources/TFC/TFC_Motor.c **** 			M(-18),
  60:../sources/TFC/TFC_Motor.c **** 			M(-17),
  61:../sources/TFC/TFC_Motor.c **** 			M(-16),
  62:../sources/TFC/TFC_Motor.c **** 			M(-15),
  63:../sources/TFC/TFC_Motor.c **** 			M(-14),
  64:../sources/TFC/TFC_Motor.c **** 			M(-13),
  65:../sources/TFC/TFC_Motor.c **** 			M(-12),
  66:../sources/TFC/TFC_Motor.c **** 			M(-11),
  67:../sources/TFC/TFC_Motor.c **** 			M(-10),
  68:../sources/TFC/TFC_Motor.c **** 			M(-9),
  69:../sources/TFC/TFC_Motor.c **** 			M(-8),
  70:../sources/TFC/TFC_Motor.c **** 			M(-7),
  71:../sources/TFC/TFC_Motor.c **** 			M(-6),
  72:../sources/TFC/TFC_Motor.c **** 			M(-5),
  73:../sources/TFC/TFC_Motor.c **** 			M(-4),
  74:../sources/TFC/TFC_Motor.c **** 			M(-3),
  75:../sources/TFC/TFC_Motor.c **** 			M(-2),
  76:../sources/TFC/TFC_Motor.c **** 			M(-1),
  77:../sources/TFC/TFC_Motor.c **** 			M(0),
  78:../sources/TFC/TFC_Motor.c **** 			M(1),
  79:../sources/TFC/TFC_Motor.c **** 			M(2),
  80:../sources/TFC/TFC_Motor.c **** 			M(3),
  81:../sources/TFC/TFC_Motor.c **** 			M(4),
  82:../sources/TFC/TFC_Motor.c **** 			M(5),
  83:../sources/TFC/TFC_Motor.c **** 			M(6),
  84:../sources/TFC/TFC_Motor.c **** 			M(7),
  85:../sources/TFC/TFC_Motor.c **** 			M(8),
  86:../sources/TFC/TFC_Motor.c **** 			M(9),
  87:../sources/TFC/TFC_Motor.c **** 			M(10),
  88:../sources/TFC/TFC_Motor.c **** 			M(11),
  89:../sources/TFC/TFC_Motor.c **** 			M(12),
  90:../sources/TFC/TFC_Motor.c **** 			M(13),
  91:../sources/TFC/TFC_Motor.c **** 			M(14),
  92:../sources/TFC/TFC_Motor.c **** 			M(15),
  93:../sources/TFC/TFC_Motor.c **** 			M(16),
  94:../sources/TFC/TFC_Motor.c **** 			M(17),
  95:../sources/TFC/TFC_Motor.c **** 			M(18),
  96:../sources/TFC/TFC_Motor.c **** 			M(19),
  97:../sources/TFC/TFC_Motor.c **** 			M(20),
  98:../sources/TFC/TFC_Motor.c **** 			M(21),
  99:../sources/TFC/TFC_Motor.c **** 			M(22),
 100:../sources/TFC/TFC_Motor.c **** 			M(23),
 101:../sources/TFC/TFC_Motor.c **** 			M(24),
 102:../sources/TFC/TFC_Motor.c **** 			M(25),
 103:../sources/TFC/TFC_Motor.c **** 			M(26),
 104:../sources/TFC/TFC_Motor.c **** 			M(27),
 105:../sources/TFC/TFC_Motor.c **** 			M(28),
 106:../sources/TFC/TFC_Motor.c **** 			M(29),
 107:../sources/TFC/TFC_Motor.c **** 			M(30),
 108:../sources/TFC/TFC_Motor.c **** 			M(31),
 109:../sources/TFC/TFC_Motor.c **** 			M(32),
 110:../sources/TFC/TFC_Motor.c **** 			M(33),
 111:../sources/TFC/TFC_Motor.c **** 			M(34),
 112:../sources/TFC/TFC_Motor.c **** 			M(35),
 113:../sources/TFC/TFC_Motor.c **** 			M(36),
 114:../sources/TFC/TFC_Motor.c **** 			M(37),
 115:../sources/TFC/TFC_Motor.c **** 			M(38),
 116:../sources/TFC/TFC_Motor.c **** 			M(39),
 117:../sources/TFC/TFC_Motor.c **** 			M(40),
 118:../sources/TFC/TFC_Motor.c **** 			M(41),
 119:../sources/TFC/TFC_Motor.c **** 			M(42),
 120:../sources/TFC/TFC_Motor.c **** 			M(43),
 121:../sources/TFC/TFC_Motor.c **** 			M(44),
 122:../sources/TFC/TFC_Motor.c **** 			M(45),
 123:../sources/TFC/TFC_Motor.c **** 			M(46),
 124:../sources/TFC/TFC_Motor.c **** 			M(47),
 125:../sources/TFC/TFC_Motor.c **** 			M(48),
 126:../sources/TFC/TFC_Motor.c **** 			M(49),
 127:../sources/TFC/TFC_Motor.c **** 			M(50)
 128:../sources/TFC/TFC_Motor.c **** };
 129:../sources/TFC/TFC_Motor.c **** 
 130:../sources/TFC/TFC_Motor.c **** void TFC_SetPWMLookup(int setA, int setB)
 131:../sources/TFC/TFC_Motor.c **** {
 138              		.loc 1 131 0
 139              		.cfi_startproc
 140 0000 90B5     		push	{r4, r7, lr}
 141              	.LCFI0:
 142              		.cfi_def_cfa_offset 12
 143              		.cfi_offset 4, -12
 144              		.cfi_offset 7, -8
 145              		.cfi_offset 14, -4
 146 0002 83B0     		sub	sp, sp, #12
 147              	.LCFI1:
 148              		.cfi_def_cfa_offset 24
 149 0004 00AF     		add	r7, sp, #0
 150              	.LCFI2:
 151              		.cfi_def_cfa_register 7
 152 0006 7860     		str	r0, [r7, #4]
 153 0008 3960     		str	r1, [r7]
 132:../sources/TFC/TFC_Motor.c **** 	// To make sure speeds are within range: -50-50
 133:../sources/TFC/TFC_Motor.c **** 	if(setA>50.0)
 154              		.loc 1 133 0
 155 000a 7868     		ldr	r0, [r7, #4]
 156 000c FFF7FEFF 		bl	__aeabi_i2d
 157 0010 031C     		mov	r3, r0
 158 0012 0C1C     		mov	r4, r1
 159 0014 181C     		mov	r0, r3
 160 0016 211C     		mov	r1, r4
 161 0018 3C4B     		ldr	r3, .L16+4
 162 001a 3B4A     		ldr	r2, .L16
 163 001c FFF7FEFF 		bl	__aeabi_dcmpgt
 164 0020 031C     		mov	r3, r0
 165 0022 002B     		cmp	r3, #0
 166 0024 02D0     		beq	.L14
 167              	.L10:
 134:../sources/TFC/TFC_Motor.c **** 		setA = 50.0;
 168              		.loc 1 134 0
 169 0026 3223     		mov	r3, #50
 170 0028 7B60     		str	r3, [r7, #4]
 171 002a 10E0     		b	.L4
 172              	.L14:
 135:../sources/TFC/TFC_Motor.c **** 	else if(setA<-50.0)
 173              		.loc 1 135 0
 174 002c 7868     		ldr	r0, [r7, #4]
 175 002e FFF7FEFF 		bl	__aeabi_i2d
 176 0032 031C     		mov	r3, r0
 177 0034 0C1C     		mov	r4, r1
 178 0036 181C     		mov	r0, r3
 179 0038 211C     		mov	r1, r4
 180 003a 354A     		ldr	r2, .L16+8
 181 003c 354B     		ldr	r3, .L16+12
 182 003e FFF7FEFF 		bl	__aeabi_dcmplt
 183 0042 031C     		mov	r3, r0
 184 0044 002B     		cmp	r3, #0
 185 0046 02D0     		beq	.L4
 186              	.L11:
 136:../sources/TFC/TFC_Motor.c **** 		setA = -50.0;
 187              		.loc 1 136 0
 188 0048 3223     		mov	r3, #50
 189 004a 5B42     		neg	r3, r3
 190 004c 7B60     		str	r3, [r7, #4]
 191              	.L4:
 137:../sources/TFC/TFC_Motor.c **** 	
 138:../sources/TFC/TFC_Motor.c **** 	if(setB>50.0)
 192              		.loc 1 138 0
 193 004e 3868     		ldr	r0, [r7]
 194 0050 FFF7FEFF 		bl	__aeabi_i2d
 195 0054 031C     		mov	r3, r0
 196 0056 0C1C     		mov	r4, r1
 197 0058 181C     		mov	r0, r3
 198 005a 211C     		mov	r1, r4
 199 005c 2B4B     		ldr	r3, .L16+4
 200 005e 2A4A     		ldr	r2, .L16
 201 0060 FFF7FEFF 		bl	__aeabi_dcmpgt
 202 0064 031C     		mov	r3, r0
 203 0066 002B     		cmp	r3, #0
 204 0068 02D0     		beq	.L15
 205              	.L12:
 139:../sources/TFC/TFC_Motor.c **** 		setB = 50.0;
 206              		.loc 1 139 0
 207 006a 3223     		mov	r3, #50
 208 006c 3B60     		str	r3, [r7]
 209 006e 10E0     		b	.L8
 210              	.L15:
 140:../sources/TFC/TFC_Motor.c **** 		else if(setB<-50.0)
 211              		.loc 1 140 0
 212 0070 3868     		ldr	r0, [r7]
 213 0072 FFF7FEFF 		bl	__aeabi_i2d
 214 0076 031C     		mov	r3, r0
 215 0078 0C1C     		mov	r4, r1
 216 007a 181C     		mov	r0, r3
 217 007c 211C     		mov	r1, r4
 218 007e 244A     		ldr	r2, .L16+8
 219 0080 244B     		ldr	r3, .L16+12
 220 0082 FFF7FEFF 		bl	__aeabi_dcmplt
 221 0086 031C     		mov	r3, r0
 222 0088 002B     		cmp	r3, #0
 223 008a 02D0     		beq	.L8
 224              	.L13:
 141:../sources/TFC/TFC_Motor.c **** 			setB = -50.0;
 225              		.loc 1 141 0
 226 008c 3223     		mov	r3, #50
 227 008e 5B42     		neg	r3, r3
 228 0090 3B60     		str	r3, [r7]
 229              	.L8:
 142:../sources/TFC/TFC_Motor.c **** 	
 143:../sources/TFC/TFC_Motor.c **** 	
 144:../sources/TFC/TFC_Motor.c **** 	setA += 50;
 230              		.loc 1 144 0
 231 0092 7B68     		ldr	r3, [r7, #4]
 232 0094 3233     		add	r3, r3, #50
 233 0096 7B60     		str	r3, [r7, #4]
 145:../sources/TFC/TFC_Motor.c **** 	setB += 50;
 234              		.loc 1 145 0
 235 0098 3B68     		ldr	r3, [r7]
 236 009a 3233     		add	r3, r3, #50
 237 009c 3B60     		str	r3, [r7]
 146:../sources/TFC/TFC_Motor.c **** 	
 147:../sources/TFC/TFC_Motor.c **** 	TPM0_C2V = ((float)TPM0_MOD * PWMtable[setA]);
 238              		.loc 1 147 0
 239 009e 1E4C     		ldr	r4, .L16+16
 240 00a0 1D4B     		ldr	r3, .L16+16
 241 00a2 9B68     		ldr	r3, [r3, #8]
 242 00a4 181C     		mov	r0, r3
 243 00a6 FFF7FEFF 		bl	__aeabi_ui2f
 244 00aa 021C     		add	r2, r0, #0
 245 00ac 1B4B     		ldr	r3, .L16+20
 246 00ae 7968     		ldr	r1, [r7, #4]
 247 00b0 8900     		lsl	r1, r1, #2
 248 00b2 CB58     		ldr	r3, [r1, r3]
 249 00b4 101C     		add	r0, r2, #0
 250 00b6 191C     		add	r1, r3, #0
 251 00b8 FFF7FEFF 		bl	__aeabi_fmul
 252 00bc 031C     		add	r3, r0, #0
 253 00be 181C     		add	r0, r3, #0
 254 00c0 FFF7FEFF 		bl	__aeabi_f2uiz
 255 00c4 031C     		mov	r3, r0
 256 00c6 2362     		str	r3, [r4, #32]
 148:../sources/TFC/TFC_Motor.c **** 	TPM0_C3V = TPM0_C2V;
 257              		.loc 1 148 0
 258 00c8 134B     		ldr	r3, .L16+16
 259 00ca 134A     		ldr	r2, .L16+16
 260 00cc 126A     		ldr	r2, [r2, #32]
 261 00ce 9A62     		str	r2, [r3, #40]
 149:../sources/TFC/TFC_Motor.c **** 	TPM0_C0V =  ((float)TPM0_MOD * PWMtable[setB]);
 262              		.loc 1 149 0
 263 00d0 114C     		ldr	r4, .L16+16
 264 00d2 114B     		ldr	r3, .L16+16
 265 00d4 9B68     		ldr	r3, [r3, #8]
 266 00d6 181C     		mov	r0, r3
 267 00d8 FFF7FEFF 		bl	__aeabi_ui2f
 268 00dc 021C     		add	r2, r0, #0
 269 00de 0F4B     		ldr	r3, .L16+20
 270 00e0 3968     		ldr	r1, [r7]
 271 00e2 8900     		lsl	r1, r1, #2
 272 00e4 CB58     		ldr	r3, [r1, r3]
 273 00e6 101C     		add	r0, r2, #0
 274 00e8 191C     		add	r1, r3, #0
 275 00ea FFF7FEFF 		bl	__aeabi_fmul
 276 00ee 031C     		add	r3, r0, #0
 277 00f0 181C     		add	r0, r3, #0
 278 00f2 FFF7FEFF 		bl	__aeabi_f2uiz
 279 00f6 031C     		mov	r3, r0
 280 00f8 2361     		str	r3, [r4, #16]
 150:../sources/TFC/TFC_Motor.c **** 	TPM0_C1V = TPM0_C0V;
 281              		.loc 1 150 0
 282 00fa 074B     		ldr	r3, .L16+16
 283 00fc 064A     		ldr	r2, .L16+16
 284 00fe 1269     		ldr	r2, [r2, #16]
 285 0100 9A61     		str	r2, [r3, #24]
 151:../sources/TFC/TFC_Motor.c **** 
 152:../sources/TFC/TFC_Motor.c **** }
 286              		.loc 1 152 0
 287 0102 BD46     		mov	sp, r7
 288 0104 03B0     		add	sp, sp, #12
 289              		@ sp needed for prologue
 290 0106 90BD     		pop	{r4, r7, pc}
 291              	.L17:
 292              		.align	3
 293              	.L16:
 294 0108 00000000 		.word	0
 295 010c 00004940 		.word	1078525952
 296 0110 00000000 		.word	0
 297 0114 000049C0 		.word	-1068957696
 298 0118 00800340 		.word	1073971200
 299 011c 00000000 		.word	PWMtable
 300              		.cfi_endproc
 301              	.LFE0:
 303              		.section	.text.TFC_InitMotorPWM,"ax",%progbits
 304              		.align	2
 305              		.global	TFC_InitMotorPWM
 306              		.code	16
 307              		.thumb_func
 309              	TFC_InitMotorPWM:
 310              	.LFB1:
 153:../sources/TFC/TFC_Motor.c **** 
 154:../sources/TFC/TFC_Motor.c **** 
 155:../sources/TFC/TFC_Motor.c **** void TFC_InitMotorPWM()
 156:../sources/TFC/TFC_Motor.c **** {
 311              		.loc 1 156 0
 312              		.cfi_startproc
 313 0000 80B5     		push	{r7, lr}
 314              	.LCFI3:
 315              		.cfi_def_cfa_offset 8
 316              		.cfi_offset 7, -8
 317              		.cfi_offset 14, -4
 318 0002 00AF     		add	r7, sp, #0
 319              	.LCFI4:
 320              		.cfi_def_cfa_register 7
 157:../sources/TFC/TFC_Motor.c **** 	//Clock Setup for the TPM requires a couple steps.
 158:../sources/TFC/TFC_Motor.c **** 
 159:../sources/TFC/TFC_Motor.c **** 	
 160:../sources/TFC/TFC_Motor.c ****     //1st,  set the clock mux
 161:../sources/TFC/TFC_Motor.c ****     //See Page 124 of f the KL25 Sub-Family Reference Manual, Rev. 3, September 2012
 162:../sources/TFC/TFC_Motor.c ****     SIM_SOPT2 |= SIM_SOPT2_PLLFLLSEL_MASK;// We Want MCGPLLCLK/2 (See Page 196 of the KL25 Sub-Fami
 321              		.loc 1 162 0
 322 0004 2C4A     		ldr	r2, .L19
 323 0006 2C49     		ldr	r1, .L19
 324 0008 2C4B     		ldr	r3, .L19+4
 325 000a CB58     		ldr	r3, [r1, r3]
 326 000c 8021     		mov	r1, #128
 327 000e 4902     		lsl	r1, r1, #9
 328 0010 1943     		orr	r1, r3
 329 0012 2A4B     		ldr	r3, .L19+4
 330 0014 D150     		str	r1, [r2, r3]
 163:../sources/TFC/TFC_Motor.c ****     SIM_SOPT2 &= ~(SIM_SOPT2_TPMSRC_MASK);
 331              		.loc 1 163 0
 332 0016 284A     		ldr	r2, .L19
 333 0018 2749     		ldr	r1, .L19
 334 001a 284B     		ldr	r3, .L19+4
 335 001c C958     		ldr	r1, [r1, r3]
 336 001e 284B     		ldr	r3, .L19+8
 337 0020 1940     		and	r1, r3
 338 0022 264B     		ldr	r3, .L19+4
 339 0024 D150     		str	r1, [r2, r3]
 164:../sources/TFC/TFC_Motor.c ****     SIM_SOPT2 |= SIM_SOPT2_TPMSRC(1); //We want the MCGPLLCLK/2 (See Page 196 of the KL25 Sub-Famil
 340              		.loc 1 164 0
 341 0026 244A     		ldr	r2, .L19
 342 0028 2349     		ldr	r1, .L19
 343 002a 244B     		ldr	r3, .L19+4
 344 002c CB58     		ldr	r3, [r1, r3]
 345 002e 8021     		mov	r1, #128
 346 0030 4904     		lsl	r1, r1, #17
 347 0032 1943     		orr	r1, r3
 348 0034 214B     		ldr	r3, .L19+4
 349 0036 D150     		str	r1, [r2, r3]
 165:../sources/TFC/TFC_Motor.c **** 
 166:../sources/TFC/TFC_Motor.c **** 
 167:../sources/TFC/TFC_Motor.c **** 	//Enable the Clock to the FTM0 Module
 168:../sources/TFC/TFC_Motor.c **** 	//See Page 207 of f the KL25 Sub-Family Reference Manual, Rev. 3, September 2012
 169:../sources/TFC/TFC_Motor.c **** 	SIM_SCGC6 |= SIM_SCGC6_TPM0_MASK;
 350              		.loc 1 169 0
 351 0038 1F4A     		ldr	r2, .L19
 352 003a 1F49     		ldr	r1, .L19
 353 003c 214B     		ldr	r3, .L19+12
 354 003e CB58     		ldr	r3, [r1, r3]
 355 0040 8021     		mov	r1, #128
 356 0042 4904     		lsl	r1, r1, #17
 357 0044 1943     		orr	r1, r3
 358 0046 1F4B     		ldr	r3, .L19+12
 359 0048 D150     		str	r1, [r2, r3]
 170:../sources/TFC/TFC_Motor.c ****     
 171:../sources/TFC/TFC_Motor.c ****     //The TPM Module has Clock.  Now set up the peripheral
 172:../sources/TFC/TFC_Motor.c ****     
 173:../sources/TFC/TFC_Motor.c ****     //Blow away the control registers to ensure that the counter is not running
 174:../sources/TFC/TFC_Motor.c ****     TPM0_SC = 0;
 360              		.loc 1 174 0
 361 004a 1F4B     		ldr	r3, .L19+16
 362 004c 0022     		mov	r2, #0
 363 004e 1A60     		str	r2, [r3]
 175:../sources/TFC/TFC_Motor.c ****     TPM0_CONF = 0;
 364              		.loc 1 175 0
 365 0050 1D4A     		ldr	r2, .L19+16
 366 0052 8423     		mov	r3, #132
 367 0054 0021     		mov	r1, #0
 368 0056 D150     		str	r1, [r2, r3]
 176:../sources/TFC/TFC_Motor.c ****     
 177:../sources/TFC/TFC_Motor.c ****     //While the counter is disabled we can setup the prescaler
 178:../sources/TFC/TFC_Motor.c ****     
 179:../sources/TFC/TFC_Motor.c ****     TPM0_SC = TPM_SC_PS(FTM0_CLK_PRESCALE);
 369              		.loc 1 179 0
 370 0058 1B4B     		ldr	r3, .L19+16
 371 005a 0022     		mov	r2, #0
 372 005c 1A60     		str	r2, [r3]
 180:../sources/TFC/TFC_Motor.c ****     
 181:../sources/TFC/TFC_Motor.c ****     //Setup the mod register to get the correct PWM Period
 182:../sources/TFC/TFC_Motor.c ****     
 183:../sources/TFC/TFC_Motor.c ****     TPM0_MOD = FTM0_CLOCK/(1<<FTM0_CLK_PRESCALE)/FTM0_OVERFLOW_FREQUENCY;
 373              		.loc 1 183 0
 374 005e 1A4B     		ldr	r3, .L19+16
 375 0060 9622     		mov	r2, #150
 376 0062 5201     		lsl	r2, r2, #5
 377 0064 9A60     		str	r2, [r3, #8]
 184:../sources/TFC/TFC_Motor.c ****     
 185:../sources/TFC/TFC_Motor.c ****     //Setup Channels 0,1,2,3
 186:../sources/TFC/TFC_Motor.c ****     TPM0_C0SC = TPM_CnSC_MSB_MASK | TPM_CnSC_ELSB_MASK;
 378              		.loc 1 186 0
 379 0066 184B     		ldr	r3, .L19+16
 380 0068 2822     		mov	r2, #40
 381 006a DA60     		str	r2, [r3, #12]
 187:../sources/TFC/TFC_Motor.c ****     TPM0_C1SC = TPM_CnSC_MSB_MASK | TPM_CnSC_ELSA_MASK; // invert the second PWM signal for a compl
 382              		.loc 1 187 0
 383 006c 164B     		ldr	r3, .L19+16
 384 006e 2422     		mov	r2, #36
 385 0070 5A61     		str	r2, [r3, #20]
 188:../sources/TFC/TFC_Motor.c ****     TPM0_C2SC = TPM_CnSC_MSB_MASK | TPM_CnSC_ELSB_MASK;
 386              		.loc 1 188 0
 387 0072 154B     		ldr	r3, .L19+16
 388 0074 2822     		mov	r2, #40
 389 0076 DA61     		str	r2, [r3, #28]
 189:../sources/TFC/TFC_Motor.c ****     TPM0_C3SC = TPM_CnSC_MSB_MASK | TPM_CnSC_ELSA_MASK; // invert the second PWM signal for a compl
 390              		.loc 1 189 0
 391 0078 134B     		ldr	r3, .L19+16
 392 007a 2422     		mov	r2, #36
 393 007c 5A62     		str	r2, [r3, #36]
 190:../sources/TFC/TFC_Motor.c ****     
 191:../sources/TFC/TFC_Motor.c ****     
 192:../sources/TFC/TFC_Motor.c ****     //Enable the Counter
 193:../sources/TFC/TFC_Motor.c ****     
 194:../sources/TFC/TFC_Motor.c ****     //Set the Default duty cycle to 50% duty cycle
 195:../sources/TFC/TFC_Motor.c ****     TFC_SetPWMLookup(0.0,0.0);
 394              		.loc 1 195 0
 395 007e 0020     		mov	r0, #0
 396 0080 0021     		mov	r1, #0
 397 0082 FFF7FEFF 		bl	TFC_SetPWMLookup
 196:../sources/TFC/TFC_Motor.c ****     
 197:../sources/TFC/TFC_Motor.c ****     //Enable the TPM COunter
 198:../sources/TFC/TFC_Motor.c ****     TPM0_SC |= TPM_SC_CMOD(1);
 398              		.loc 1 198 0
 399 0086 104B     		ldr	r3, .L19+16
 400 0088 0F4A     		ldr	r2, .L19+16
 401 008a 1268     		ldr	r2, [r2]
 402 008c 0821     		mov	r1, #8
 403 008e 0A43     		orr	r2, r1
 404 0090 1A60     		str	r2, [r3]
 199:../sources/TFC/TFC_Motor.c ****     
 200:../sources/TFC/TFC_Motor.c ****     
 201:../sources/TFC/TFC_Motor.c ****     //Enable the FTM functions on the the port
 202:../sources/TFC/TFC_Motor.c ****     PORTC_PCR1 = PORT_PCR_MUX(4);
 405              		.loc 1 202 0
 406 0092 0E4B     		ldr	r3, .L19+20
 407 0094 8022     		mov	r2, #128
 408 0096 D200     		lsl	r2, r2, #3
 409 0098 5A60     		str	r2, [r3, #4]
 203:../sources/TFC/TFC_Motor.c ****     PORTC_PCR2 = PORT_PCR_MUX(4);     
 410              		.loc 1 203 0
 411 009a 0C4B     		ldr	r3, .L19+20
 412 009c 8022     		mov	r2, #128
 413 009e D200     		lsl	r2, r2, #3
 414 00a0 9A60     		str	r2, [r3, #8]
 204:../sources/TFC/TFC_Motor.c ****     PORTC_PCR3 = PORT_PCR_MUX(4);  
 415              		.loc 1 204 0
 416 00a2 0A4B     		ldr	r3, .L19+20
 417 00a4 8022     		mov	r2, #128
 418 00a6 D200     		lsl	r2, r2, #3
 419 00a8 DA60     		str	r2, [r3, #12]
 205:../sources/TFC/TFC_Motor.c ****     PORTC_PCR4 = PORT_PCR_MUX(4);  
 420              		.loc 1 205 0
 421 00aa 084B     		ldr	r3, .L19+20
 422 00ac 8022     		mov	r2, #128
 423 00ae D200     		lsl	r2, r2, #3
 424 00b0 1A61     		str	r2, [r3, #16]
 206:../sources/TFC/TFC_Motor.c **** 
 207:../sources/TFC/TFC_Motor.c **** }
 425              		.loc 1 207 0
 426 00b2 BD46     		mov	sp, r7
 427              		@ sp needed for prologue
 428 00b4 80BD     		pop	{r7, pc}
 429              	.L20:
 430 00b6 C046     		.align	2
 431              	.L19:
 432 00b8 00700440 		.word	1074032640
 433 00bc 04100000 		.word	4100
 434 00c0 FFFFFFFC 		.word	-50331649
 435 00c4 3C100000 		.word	4156
 436 00c8 00800340 		.word	1073971200
 437 00cc 00B00440 		.word	1074049024
 438              		.cfi_endproc
 439              	.LFE1:
 441              		.text
 442              	.Letext0:
 443              		.file 2 "C:/Freescale/CW MCU v10.5/MCU/ARM_GCC_Support/ewl/EWL_C/include/cstdint"
 444              		.file 3 "H:/CodeWarrior/freescale-line/freescale-line/Project_Headers/MKL25Z4.h"
DEFINED SYMBOLS
                            *ABS*:00000000 TFC_Motor.c
C:\Users\TAMIMI~1\AppData\Local\Temp\cc3iFMjs.s:18     .rodata.PWMtable:00000000 $d
C:\Users\TAMIMI~1\AppData\Local\Temp\cc3iFMjs.s:21     .rodata.PWMtable:00000000 PWMtable
C:\Users\TAMIMI~1\AppData\Local\Temp\cc3iFMjs.s:130    .text.TFC_SetPWMLookup:00000000 $t
C:\Users\TAMIMI~1\AppData\Local\Temp\cc3iFMjs.s:135    .text.TFC_SetPWMLookup:00000000 TFC_SetPWMLookup
C:\Users\TAMIMI~1\AppData\Local\Temp\cc3iFMjs.s:294    .text.TFC_SetPWMLookup:00000108 $d
C:\Users\TAMIMI~1\AppData\Local\Temp\cc3iFMjs.s:304    .text.TFC_InitMotorPWM:00000000 $t
C:\Users\TAMIMI~1\AppData\Local\Temp\cc3iFMjs.s:309    .text.TFC_InitMotorPWM:00000000 TFC_InitMotorPWM
C:\Users\TAMIMI~1\AppData\Local\Temp\cc3iFMjs.s:432    .text.TFC_InitMotorPWM:000000b8 $d
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
__aeabi_i2d
__aeabi_dcmpgt
__aeabi_dcmplt
__aeabi_ui2f
__aeabi_fmul
__aeabi_f2uiz
