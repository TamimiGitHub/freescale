#include "derivative.h" /* include peripheral declarations */
#include "TFC\TFC.h"

int main(void)
{
	
	uint32_t t,i=0;
	TFC_Init();

	TFC_Delay_mS(3000);
	//Demo Mode 2 will use the Pots to make the motors move
	TFC_HBRIDGE_ENABLE;
	
	TFC_SetPWMLookup(10,10);
	
	
	// Gradient of speed
	/*int j;
	for(j=0; j<10; j++){
		TFC_SetPWMLookup(j,j);
		TFC_Delay_mS(10000);
	}*/

	TFC_Delay_mS(3000);


	//TFC_SetMotorPWM(TFC_ReadPot(0),TFC_ReadPot(1));

	//Let's put a pattern on the LEDs
	if(TFC_Ticker[1] >= 125)
		{
			TFC_Ticker[1] = 0;
				t++;
				if(t>4)
				{
					t=0;
				}			
			TFC_SetBatteryLED_Level(t);
		}
	TFC_SetPWMLookup(0,0); //Make sure motors are off
	TFC_HBRIDGE_DISABLE;


	for(;;)
	{	   
	//TFC_Task must be called in your main loop.  This keeps certain processing happy (I.E. Serial port queue check)
		TFC_Task();
	}

	return 0;
}
